\ProvidesPackage{tipspromenad}

\RequirePackage{array}
\RequirePackage{titlesec}
\RequirePackage{etoolbox}
\RequirePackage{graphicx}

% Räknare för frågor
\newcounter{fraga}
\newcounter{fragaonpage}

% Anpassa rubrikstil
\titleformat{\section}{\centering\bfseries\Large}{}{0pt}{}

% Rekursiv makro som bygger rader
\newcommand{\makerows}[1]{%
	#1 & & & \\ \hline
	\ifnum#1<\value{fraga}%
		\expandafter\makerows\expandafter{\number\numexpr#1+1\relax}%
	\fi
}

% En enskild blankett
\newcommand{\svarsblankett}{%
	\renewcommand{\arraystretch}{1.5}%
	\noindent\textbf{Namn:} \rule{0.65\linewidth}{0.4pt}\\[1em]
	\begin{tabular}{|c|*{3}{>{\centering\arraybackslash}p{1.5cm}|}}
		\hline
		\textbf{Fråga} & \textbf{1} & \textbf{X} & \textbf{2} \\ \hline
		\makerows{1}
	\end{tabular}

	\vspace{2em}
	\textbf{Utslagsfråga:} \rule{0.4\linewidth}{0.4pt}\\[1em]
}

% Kommando för att skriva ut flera blanketter
\newcommand{\svarsblanketter}{%
	\clearpage
	\noindent
	\hspace{2cm}%
	\begin{minipage}[t]{0.3\textwidth}
		\svarsblankett
	\end{minipage}\hfill
	\begin{minipage}[t]{0.3\textwidth}
		\svarsblankett
	\end{minipage}\hfill
	\begin{minipage}[t]{0.3\textwidth}
		\svarsblankett
	\end{minipage}
	\hspace*{1cm}%
}

% Variabel för titel
\newcommand{\promenadtitel}{\LARGE TIPSPROMENAD}
\newcommand{\setpromenadtitel}[1]{\renewcommand{\promenadtitel}{#1}}

% Kommando för en fråga
\newcommand{\tipspromenadfraga}[5]{%
	\stepcounter{fraga}%
	\stepcounter{fragaonpage}%
	\ifnum\value{fragaonpage}=1
		\noindent
	\fi
	\begin{minipage}[t]{0.49\textwidth}
		\begin{center}
			{\promenadtitel}\\[1em]
			FRÅGA \#\thefraga
		\end{center}
		\vspace{1em}
		\begin{center}
			\parbox[c][8cm][c]{0.9\linewidth}{%
				\ifstrempty{#1}{%
				}{%
					\centering\includegraphics[width=11cm,height=8cm,keepaspectratio]{#1}
				}%
			}
		\end{center}
		\begin{center}
			\parbox{13cm}{\centering #2}
		\end{center}
		\vspace{1em}
		\renewcommand{\arraystretch}{1.8}
		\begin{center}
			\begin{tabular}{|>{\centering\arraybackslash}m{1cm}|m{8cm}|}
				\hline
				1 & #3 \\ \hline
				X & #4 \\ \hline
				2 & #5 \\ \hline
			\end{tabular}
		\end{center}
	\end{minipage}%
	\ifnum\value{fragaonpage}=2
		\setcounter{fragaonpage}{0}%
		\par\newpage
	\else
		\hspace{0.2cm}
		\vrule width 0.4pt
	\fi
	\ignorespacesafterend
}%




